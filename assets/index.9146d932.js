const O=function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function c(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=c(e);fetch(e.href,n)}};O();const M=[];function S(i,p,c=()=>{}){const o=document.createElement("div");M.push(o),o.classList.add("menu");for(const e of p){const n=document.createElement("div");e=="separator"?n.classList.add("menu-separator"):(n.classList.add("menu-item"),n.innerHTML=e.text,n.addEventListener("click",d=>{d.stopPropagation(),o.style.display="none",e.event()})),o.appendChild(n)}return document.body.appendChild(o),document.addEventListener("contextmenu",function(e){i.contains(e.target)||(o.style.display="none")}),i.addEventListener("mousedown",e=>{e.button===2&&(e.stopPropagation(),e.preventDefault())}),i.addEventListener("mouseup",e=>{e.button===2&&(e.stopPropagation(),e.preventDefault())}),i.addEventListener("contextmenu",function(e){e.preventDefault(),e.stopPropagation();for(const n of M)n.style.display="none";o.style.display="block",o.style.left=e.x+"px",o.style.top=e.y+"px",c()}),document.addEventListener("click",function(e){o.style.display="none"}),o}const A={folder:["fa-solid","fa-folder","folder-icon","icon"],file:["fa-solid","fa-file","file-icon","icon"]},g=[],N={value:null};function F(i,p,c,o,e={}){const n=document.createElement("div");n.classList.add("element");const d=document.createElement("div");n.appendChild(d),n.draggable=!0,d.classList.add("sub");const v=document.createElement("i");v.classList.add(...A[c]),d.appendChild(v);const r=document.createElement("div");r.classList.add("element-name"),r.innerText=p;function s(){r.setAttribute("contenteditable",!0),r.draggable=!1,r.classList.add("element-name-edit"),r.focus();const u=document.createRange(),a=window.getSelection();u.selectNodeContents(r),a.removeAllRanges(),a.addRange(u);function t(f){r.contains(f.target)||(r.setAttribute("contenteditable",!1),r.draggable=!0,r.classList.remove("element-name-edit"),document.removeEventListener("mousedown",t))}r.addEventListener("keydown",f=>{f.key==="Enter"&&(r.setAttribute("contenteditable",!1),r.draggable=!0,r.classList.remove("element-name-edit"),document.removeEventListener("mousedown",t))}),document.addEventListener("mousedown",t)}d.appendChild(r),i.appendChild(n);const l={element:n,sub:d,index:o,selected:!1,cropped:!1};g.push(l),n.addEventListener("mousedown",u=>{u.stopPropagation()}),n.addEventListener("click",u=>{if(T)l.selected=!l.selected,n.classList.toggle("element-selected");else{for(const a of g)a.element.classList.remove("element-selected"),a.selected=!1;l.selected=!0,n.classList.add("element-selected")}}),n.addEventListener("dragstart",u=>{if(T)l.selected=!0,n.classList.add("element-selected");else if(!l.selected){for(const a of g)a.element.classList.remove("element-selected"),a.selected=!1;l.selected=!0,n.classList.add("element-selected")}}),n.addEventListener("dragover",u=>{!l.selected&&c=="folder"&&(N.value={index:o,type:"sibling"},u.preventDefault())}),n.addEventListener("dragleave",u=>{N.value=null}),n.addEventListener("dragend",u=>{N.value!=null&&e.drop(N.value.type,N.value.index,g.filter(a=>a.selected).map(a=>a.index)),N.value=null});var m=!1;n.addEventListener("click",u=>{m&&"open"in e&&e.open(),m=!0,setTimeout(()=>{m=!1},500)}),S(n,[{text:'<span style="color:#0c0"><i class="fa-solid fa-play"></i> Open</span>',event:()=>{"open"in e&&e.open(c)}},{text:'<span style="color:#c00"><i class="fa-solid fa-trash"></i> Delete</span>',event:()=>{"delete"in e&&e.delete(o)}},{text:'<i class="fa-solid fa-pen"></i> Rename',event:()=>{s()}},"separator",{text:'<i class="fa-solid fa-copy"></i> Copy',event:()=>{"copy"in e&&e.copy()}},{text:'<i class="fa-solid fa-cut"></i> Cut',event:()=>{"cut"in e&&e.cut()}}],()=>{if(!l.selected){for(const u of g)u.element.classList.remove("element-selected"),u.selected=!1;l.selected=!0,n.classList.add("element-selected")}})}var T=!1;document.addEventListener("keydown",i=>{i.key==="Control"&&(T=!0)});document.addEventListener("keyup",i=>{i.key==="Control"&&(T=!1)});document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&(T=!1)});function I(i,p){var c=document.createElement("div");c.classList.add("rectangle"),c.style.display="none",i.appendChild(c);var o=0,e=0,n=0,d=0,v=0,r=0;function s(){c.style.left=n+"px",c.style.top=d+"px",c.style.width=v+"px",c.style.height=r+"px"}var l=!1;function m(u){const{clientX:a,clientY:t}=u;a<o?(n=a,v=o-a):v=a-o,t<e?(d=t,r=e-t):r=t-e,(v>10||r>10)&&(c.style.display="block"),s()}i.addEventListener("mousedown",u=>{if(u.button===0){l=!0,u.preventDefault();const{clientX:a,clientY:t}=u;o=a,e=t,n=a,d=t,v=0,r=0,document.addEventListener("mousemove",m),s()}}),document.addEventListener("mouseup",u=>{if(!l)return;l=!1;const{clientX:a,clientY:t}=u;let f,b,y,h;a>o?(f=o,y=a):(f=a,y=o),t>e?(b=e,h=t):(b=t,h=e),document.removeEventListener("mousemove",m),s(),c.style.display==="block"&&p(f,b,y,h),c.style.display="none"})}const x={source:null,indexes:[],type:null};function K(i,p){var c=!1;document.addEventListener("keydown",s=>{s.key==="Control"&&(c=!0)}),document.addEventListener("keyup",s=>{s.key==="Control"&&(c=!1)}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&(c=!1)});var o=!1;document.addEventListener("click",s=>{if(o){o=!1;return}for(const l of g)if(l.element.contains(s.target))return;for(const l of g)l.element.classList.remove("element-selected"),l.selected=!1}),I(i,(s,l,m,u)=>{o=!0;for(const t of g){const f=t.element;var a=f.getBoundingClientRect();const[b,y,h,E]=[a.left,a.top,a.width,a.height];b>m||b+h<s||y>u||y+E<l?c||(t.selected=!1,f.classList.remove("element-selected")):c&&f.classList.contains("element-selected")?(f.classList.remove("element-selected"),t.selected=!1):(f.classList.add("element-selected"),t.selected=!0)}});const e=document.createElement("div");e.classList.add("path-control"),i.appendChild(e);const n=document.createElement("div");i.appendChild(n);const d=[{name:"root",children:p,current:!0}];r(p),v();function v(){e.innerHTML="";for(const s in d){const l=document.createElement("span");l.classList.add("path-item"),l.innerText=d[s].name,l.addEventListener("click",()=>{d.splice(Number(s)+1);for(const m of d)m.current=!1;d[d.length-1].current=!0,r(d[s].children),v()}),d[s].current||(l.addEventListener("dragover",m=>{N.value={type:"route",index:s},m.preventDefault()}),l.addEventListener("dragleave",m=>{N.value=null})),e.appendChild(l)}}function r(s){document.onkeyup=t=>{(t.ctrlKey||t.metaKey)&&(t.key=="x"&&m(),t.key=="c"&&u(),t.key=="v"&&a(),t.key=="a"&&(t.preventDefault(),t.stopPropagation()))},s=s.sort((t,f)=>t.type=="folder"&&f.type=="file"?-1:t.type=="file"&&f.type=="folder"?1:t.name.localeCompare(f.name));const l={folder:t=>{r(t.children),d.push(t);for(const f of d)f.current=!1;d[d.length-1].current=!0,v()},file:t=>alert(t.name)};n.innerHTML="",g.splice(0,g.length);for(const t in s){const f={open:b=>{l[s[t].type](s[t])},delete:b=>{s.splice(b,1),r(s)},copy:()=>{u()},cut:()=>{m()},drop:(b,y,h)=>{var E;b=="sibling"?E=s[y]:E=d[y];for(var w=h.length-1;w>=0;w--){const L=s[h[w]];s.splice(h[w],1),E.children.push(L)}r(s)}};F(n,s[t].name,s[t].type,t,f)}S(document.body,[{text:'<i class="fas fa-folder"></i> New Folder',event:()=>{s.push({name:"New Folder",type:"folder",children:[]}),r(s)}},{text:'<i class="fas fa-file"></i> New File',event:()=>{s.push({name:"New File",type:"file"}),r(s)}},"separator",{text:'<i class="fas fa-paste"></i> Paste',event:()=>{a()}}]);function m(){x.source=s,x.type="cut",x.indexes=[];for(const t in g)g[t].selected?(g[t].cropped=!0,g[t].sub.classList.add("element-cropped"),x.indexes.push(t)):(g[t].cropped=!1,g[t].sub.classList.remove("element-cropped"))}function u(){x.source=[],x.type="copy";for(const f in g)g[f].cropped=!1,g[f].sub.classList.remove("element-cropped");for(var t=0;t<g.length;t++)g[t].selected&&x.source.push(s[t])}function a(){if(x.type=="cut"){console.log(x.indexes);for(var t=x.indexes.length-1;t>=0;t--){const f=x.source[x.indexes[t]];x.source.splice(x.indexes[t],1),s.push(f)}r(s)}x.type=="copy"&&(s.push(...JSON.parse(JSON.stringify(x.source))),r(s))}}document.addEventListener("keydown",s=>{debugger;if((s.ctrlKey||s.metaKey)&&s.key=="a"){s.preventDefault(),s.stopPropagation();for(const l of g)l.selected=!0,l.element.classList.add("element-selected")}})}function R(i,p=null){var c=0,o=0,e=0,n=0;const d=p||i;d.onmousedown=v,d.style.cursor="move";function v(l){l.button===0&&(l=l||window.event,l.preventDefault(),e=l.clientX,n=l.clientY,document.onmouseup=s,document.onmousemove=r)}function r(l){l=l||window.event,l.preventDefault(),c=e-l.clientX,o=n-l.clientY,e=l.clientX,n=l.clientY,i.style.top=i.offsetTop-o+"px",i.style.left=i.offsetLeft-c+"px"}function s(){document.onmouseup=null,document.onmousemove=null}}function _(i,p=100,c=100,o=20){const e=document.createElement("div");e.style.width="100%",e.style.height=o+"px",e.style.backgroundColor="transparent",e.style.position="absolute",e.style.top=-(o/2)+"px",e.style.left="0px",e.style.cursor="n-resize",e.addEventListener("mousedown",b()),i.appendChild(e);const n=document.createElement("div");n.style.width="100%",n.style.height=o+"px",n.style.backgroundColor="transparent",n.style.position="absolute",n.style.bottom=-(o/2)+"px",n.style.left="0px",n.style.cursor="n-resize",n.addEventListener("mousedown",t()),i.appendChild(n);const d=document.createElement("div");d.style.width=o+"px",d.style.height="100%",d.style.backgroundColor="transparent",d.style.position="absolute",d.style.top="0px",d.style.left=-(o/2)+"px",d.style.cursor="e-resize",d.addEventListener("mousedown",f()),i.appendChild(d);const v=document.createElement("div");v.style.width=o+"px",v.style.height="100%",v.style.backgroundColor="transparent",v.style.position="absolute",v.style.top="0px",v.style.right=-(o/2)+"px",v.style.cursor="e-resize",v.addEventListener("mousedown",a()),i.appendChild(v);const r=document.createElement("div");r.style.width=o+"px",r.style.height=o+"px",r.style.backgroundColor="transparent",r.style.position="absolute",r.style.top=-(o/2)+"px",r.style.left=-(o/2)+"px",r.style.cursor="nw-resize",r.addEventListener("mousedown",f()),r.addEventListener("mousedown",b()),i.appendChild(r);const s=document.createElement("div");s.style.width=o+"px",s.style.height=o+"px",s.style.backgroundColor="transparent",s.style.position="absolute",s.style.top=-(o/2)+"px",s.style.right=-(o/2)+"px",s.style.cursor="ne-resize",s.addEventListener("mousedown",a()),s.addEventListener("mousedown",b()),i.appendChild(s);const l=document.createElement("div");l.style.width=o+"px",l.style.height=o+"px",l.style.backgroundColor="transparent",l.style.position="absolute",l.style.bottom=-(o/2)+"px",l.style.left=-(o/2)+"px",l.style.cursor="sw-resize",l.addEventListener("mousedown",f()),l.addEventListener("mousedown",t()),i.appendChild(l);const m=document.createElement("div");m.style.width=o+"px",m.style.height=o+"px",m.style.backgroundColor="transparent",m.style.position="absolute",m.style.bottom=-(o/2)+"px",m.style.right=-(o/2)+"px",m.style.cursor="se-resize",m.addEventListener("mousedown",a()),m.addEventListener("mousedown",t()),i.appendChild(m);function u(y){return parseInt(window.getComputedStyle(i).getPropertyValue(y))}function a(){let y;function h(L){if(L.button!==0)return;L=L||window.event,L.preventDefault();const{clientX:k}=L;y=k-i.offsetLeft-u("width"),document.addEventListener("mouseup",w),document.addEventListener("mousemove",E)}function E(L){const{clientX:k}=L;let D=k-i.offsetLeft-y;D<p&&(D=p),i.style.width=D+"px"}function w(){document.removeEventListener("mouseup",w),document.removeEventListener("mousemove",E)}return h}function t(){let y;function h(L){if(L.button!==0)return;L=L||window.event,L.preventDefault();const{clientY:k}=L;y=k-i.offsetTop-u("height"),document.addEventListener("mouseup",w),document.addEventListener("mousemove",E)}function E(L){const{clientY:k}=L;let D=k-i.offsetTop-y;D<c&&(D=c),i.style.height=D+"px"}function w(){document.removeEventListener("mouseup",w),document.removeEventListener("mousemove",E)}return h}function f(){let y,h,E,w;function L(C){if(C.button!==0)return;C=C||window.event,C.preventDefault();const{clientX:X}=C;h=u("left"),E=u("width"),y=X-h,w=h+E-p,document.addEventListener("mouseup",D),document.addEventListener("mousemove",k)}function k(C){const{clientX:X}=C;let P=X-y,Y=E+h-P;Y<p&&(Y=p),P>w&&(P=w),i.style.left=P+"px",i.style.width=Y+"px"}function D(){document.removeEventListener("mouseup",D),document.removeEventListener("mousemove",k)}return L}function b(){let y,h,E,w;function L(C){if(C.button!==0)return;C=C||window.event,C.preventDefault();const{clientY:X}=C;h=u("top"),E=u("height"),y=X-h,w=h+E-c,document.addEventListener("mouseup",D,!1),document.addEventListener("mousemove",k,!1)}function k(C){const{clientY:X}=C;let P=X-y,Y=E+h-P;Y<c&&(Y=c),P>w&&(P=w),i.style.top=P+"px",i.style.height=Y+"px"}function D(){document.removeEventListener("mouseup",D),document.removeEventListener("mousemove",k)}return L}}function $(i){const p=document.createElement("div");p.onselectstart=()=>!1,p.classList.add("window");const c=document.createElement("div");c.classList.add("header"),p.appendChild(c);const o=document.createElement("div");o.classList.add("title"),o.innerHTML=i,c.appendChild(o);const e=document.createElement("div");e.classList.add("nav-button"),e.innerHTML="\xD7",e.addEventListener("click",()=>{p.remove()}),e.addEventListener("mousedown",d=>{d.stopPropagation()}),c.appendChild(e);const n=document.createElement("div");return p.appendChild(n),n.classList.add("content"),R(p,c),_(p),document.body.appendChild(p),n}const H=[{name:"folder1",type:"folder",children:[{name:"folder2",type:"folder",children:[{name:"my file",type:"file"}]},{name:"file1",type:"file"},{name:"file2",type:"file"}]},{name:"folder2",type:"folder",children:[{name:"file3",type:"file"},{name:"file4",type:"file"}]},{name:"file5",type:"file"}];K($("My Window"),H);
